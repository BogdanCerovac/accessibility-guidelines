[Help us by reporting issues via Github](https://github.com/theappbusiness/accessibility-guidelines) or [email](mailto:jeanfrancois@theappbusiness.com)

[Back to the overview page](./../README.md)

# Order of elements in code

On this page:
* [Summary](#summary)
* [Requirements](#requirements)
* [Guidance for Design](#guidance-for-design)
* [Guidance for iOS](#guidance-for-ios)
* [Guidance for Android](#guidance-for-android)
* [Guidance for Web](#guidance-for-web)
* [More info](#more-info)

---

## Summary

**Make sure that elements appear in a logical reading order in code, so that they are presented in a meaningful order to screen reader users.**

Content on the page needs to be announced by screen readers in a logical reading order.
Interactive elements need to appear in the [tab order](./definitions.md#tab-order) in a logical reading order.

In most cases, a 'logical reading order' is top-to-bottom and left-to-right. 

---

## Requirements

#### Requirements for both native and web

* When users navigate the page using a keyboard's 'tab' key, or cursor arrows (when reader is on), elements receive the [keyboard focus](./definitions.md#keyboard-focus) and [screen reader cursor]() following a predictable, natural reading order.
  * A natural reading order is from left to right and top to bottom in most cases in Western countries.
* The easiest way to avoid focus order issues is to make sure that elements are displayed on screen in the same order as they appear in the DOM (Web) / Outline View (iOS and Android).

#### Requirements for both native and web

* Tabular data is presented using proper HTML markup (`<table>`, `<tr>`, `<th>`, and `<td>` elements)

### Why?

This ensures that the order of content is meaningful whether someone is looking at it, listening to it with a screen reader, or has stripped out visual styling using a browser plugin.

### Official wording in the Web Content Accessibility Guidelines

> [**1.3.2 Meaningful Sequence:**](https://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-sequence.html) When the sequence in which content is presented affects its meaning, a [correct reading sequence](https://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-sequence.html#correct-reading-sequencedef) can be [programmatically determined](https://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-sequence.html#programmaticallydetermineddef). (Level A)

See the [W3C's detailed explanation of this guideline](https://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-sequence.html) with techniques and examples.

---

## Guidance for Design

* When you provide different mock-ups for different screen sizes (e.g. desktop and mobile, or for different break points), make sure that elements appear in the same order across on the different mock-ups.
  * If you can't do that, call it out to developers as they're likely to need to create a element structure for the different screen sizes
* On the mock-ups that you give to developers or in conversations, indicate what the expected content order is (especially for interactive elements).

### Common mistakes

#### Arranging elements in a different order for different screen sizes

For example, imagine that you've designed a modal dialog with two buttons: 'Cancel' and 'OK'.
* On the design for large screens, the 'Cancel' button is positioned to the left of the 'OK' button. ('Cancel' comes before 'OK' in the reading order).
* But on the design for small screens, the 'Cancel' button is positioned to the bottom of the 'OK' button. ('Cancel' now comes after 'OK' in the reading order).
* The order or navigation links is not consistent across designs for different screen sizes

### More guidance for design

* [Annotating designs for accessibility](https://drive.google.com/file/d/1n0DkLoFydmbNxLisivqHh8xoo467HgBJ/view?usp=sharing) by Henny Swan at TPG

---

## Guidance for iOS

### Setting a custom order for child elements:

```swift
containerView.isAccessibilityElement = false
containerView.accessibilityElements = [firstLabel, secondLabel, button]
```

#### More guidance for iOS

* [UIAccessibilityContainer developer reference on apple.com](https://developer.apple.com/documentation/uikit/accessibility/uiaccessibilitycontainer "developer.apple.com reference")

---

## Guidance for Android

* By default all focussable views will be read from the screen reader from the top down. But there is a way to set a custom order for child elements.  
* It is essentially providing next focussed target for keyboard input. (The container doesn't need any special flags for it to work).
* When using this technique, make sure that elements appear in a the same natural reading, visually and in code. The best way to do that is often to keep the default order in which views are read might.

```xml
<RelativeLayout ...>
    <Button
        android:id="@+id/button1"
        android:nextFocusForward="@+id/editText1"
        ... />
    <Button
        android:id="@+id/button2"
        android:nextFocusForward="@+id/button1"
        ... />
    <EditText
        android:id="@id/editText1"
        android:nextFocusForward="@+id/button2"
        ...  />
    ...
</RelativeLayout>
```

Alternative from API 22 is to specify the traversal order `android:accessibilityTraversalAfter="@id"`.  
This is the recommended way but there is the API 22 restriction.
```xml
<RelativeLayout ...>
    <Button
        android:id="@+id/button1"
        android:accessibilityTraversalAfter="@+id/editText1"
        ... />
    <Button
        android:id="@+id/button2"
        android:accessibilityTraversalAfter="@+id/button1"
        ... />
    <EditText
        android:id="@id/editText1"
        android:accessibilityTraversalAfter="@+id/button2"
        ...  />
    ...
</RelativeLayout>
```

#### More guidance for Android

* [Support keyboard navigation developer reference on developer.android.com](https://developer.android.com/training/keyboard-input/navigation)

---

## Guidance for Web

* Do not use positive values with `tabindex`;
* With CSS Flexbox, don't use the `order` property or `flex-direction: reverse;`;
* With CSS Grid, be careful with manual placement of items on the grid;
* When using `position` `absolute`, `fixed` or `sticky`, be careful to not detach the visual order of elements from the order in which they appear in the DOM;
* If a button triggers extra content to appear (like a menu), make sure that that extra content appears next to the button in both the DOM order and visual order.

### Common mistakes

* The DOM order does not match the visual order because CSS properties like flexbox and grid-layout have been used to alter the visual presentation;
* The DOM order does not match the visual order because `tabindex` has been used with a value other than `-1` or `0`.
* A 'Agree to cookies' dialog that's positioned last in the DOM but appears at the top of the screen, without being implemented as modal (with the `inert` attribute)
* When CSS styles are disabled, the focus order is meaningless;
* Using dialogs or menus that are not adjacent to their trigger control in the sequential navigation order.
* Tabular data is displayed using CSS to present the appearance of a table, but the proper HTML markup has not been used;

### More guidance for Web

* [FlexBox and the keyboard navigation disconnect](http://tink.uk/flexbox-the-keyboard-navigation-disconnect/)
* [Writing CSS with Accessibility in Mind: Taking care of order](https://medium.com/@matuzo/writing-css-with-accessibility-in-mind-8514a0007939#bf38) by Manuel Matuzovic
* [The Dark Side of the Grid: Changing visual order](https://www.matuzo.at/blog/the-dark-side-of-the-grid-part-2/#visual-order) by Manuel Matuzovic
* [Using the tabindex attribute](https://www.paciellogroup.com/blog/2014/08/using-the-tabindex-attribute/)

---

## More info

### Sources

* [W3C Web Content Accessibility Guidelines 2.1](https://www.w3.org/TR/WCAG21/)
* [Government Digital Service WCAG 2.1 Primer](https://alphagov.github.io/wcag-primer/)

### Contribute

[Help us by reporting issues via Github](https://github.com/theappbusiness/accessibility-guidelines) or [email](mailto:jeanfrancois@theappbusiness.com)
